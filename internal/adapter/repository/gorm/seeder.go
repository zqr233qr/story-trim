package gorm

import (
	"gorm.io/gorm"
)

func SeedPrompts(db *gorm.DB) error {
	prompts := []Prompt{
		{
			ID:       1,
			Name:     "轻度精简 (氛围版)",
			Version:  "v4.0",
			Content:  "目标剩余率：75% 左右（参考字数区间：{MIN_WORDS} - {MAX_WORDS} 字）。\n\n【编辑指令】\n1. **语感修饰**：优化并合并原文中过于琐碎、重复的短句；精减无实际语义的语气助词（如“的、了、吧、呢”的过度堆砌）。\n2. **全量保留**：全量保留所有对话内容、环境渲染、角色的独特神态描写以及烘托意境的关键细节。\n3. **沉浸式体验**：必须保持原作叙事节奏，严禁出现概括性或总结性语言。\n4. **底线约束**：精简后剩余率不应低于 70%。",
			IsSystem: true,
		},
		{
			ID:       2,
			Name:     "标准精简 (爽快版)",
			Version:  "v4.0",
			Content:  "目标剩余率：50% 左右（参考字数区间：{MIN_WORDS} - {MAX_WORDS} 字）。\n\n【编辑指令】\n1. **节奏提速**：将重复出现的旁观者反应合并为简练的一两句描写；对武学招式解说、地理环境背景进行脱水处理，保留核心信息并改写得更干练。\n2. **核心锁定**：保留所有剧情转折点、主角心理博弈、关键线索道具以及与 [全局百科] 呼应的所有设定。\n3. **严防剧透**：严禁将 [全局百科] 中提到但本章原文尚未发生的剧情提前泄露。\n4. **质量优先**：如果为了凑指标导致故事断层，请优先增加字数以保护逻辑。剩余率底线 40%。",
			IsSystem: true,
		},
		{
			ID:       3,
			Name:     "极简概括 (大纲版)",
			Version:  "v4.0",
			Content:  "目标剩余率：20% 左右（参考字数区间：{MIN_WORDS} - {MAX_WORDS} 字）。\n\n【编辑指令】\n1. **叙事脉络化**：将具体的动作描写转化为叙述性语言；环境描写仅保留地理位置变动；人物交互仅保留对主线有影响的对话核心。\n2. **干货保留**：必须保留等级提升、获得物品、重要角色变动、目的地变更等关键信息。\n3. **文学正文形式**：输出仍需保持小说正文的叙事感，禁止使用“第一点”、“总结”等非小说词汇。\n4. **极简底线**：剩余率不应低于 15%，确保最基本的逻辑链条完整。",
			IsSystem: true,
		},
	}

	for _, p := range prompts {
		var exist Prompt
		if err := db.First(&exist, p.ID).Error; err == nil {
			db.Model(&exist).Updates(p)
		} else {
			db.Create(&p)
		}
	}
	return nil
}