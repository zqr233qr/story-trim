# StoryTrim 开发计划 (Development Plan)

## ✅ 已完成阶段 (Completed Stages)
- [x] **V1.0-V2.0**: 基础全栈功能、流式响应、用户系统、现代化 UI。
- [x] **V3.0 核心重构**: 
    - 原始文本池 (RawContent) 去重逻辑。
    - 精简结果 (TrimResult) 全局共享缓存。
    - 剧情摘要 (RawSummary) 记忆存储。
    - 提示词模板 (Prompt) 版本控制系统。

---

## 🔄 阶段 11: 精细化控制与性能闭环 [Next Step]
- [ ] **前端：按需加载重构**:
    - 修改阅读器逻辑，切换章节时通过 `/api/chapters/:id` 获取内容。
    - 解决上传超大文件时由于一次性传输导致的浏览器卡顿。
- [ ] **前端：模板选择器**:
    - 支持用户在阅读器中实时选择预设的 3 种精简力度。
    - 缓存命中状态显示。
- [ ] **后端：智能化摘要生成**:
    - 实现真正的异步摘要提取任务（调用 LLM 总结）。
- [ ] **系统：Token 计数器**:
    - 引入 `tiktoken` 计算并存储每章原文的 Token 数。

---

## 🚀 未来规划 (Future Roadmap)
- [ ] **阶段 12: 智能百科 (Entity RAG)**: 自动提取人物、道具、地图关系。
- [ ] **阶段 13: 商业化落地**: 会员额度、支付对接。
- [ ] **阶段 14: 跨平台封装**: 移动端 PWA 与 桌面端打包。